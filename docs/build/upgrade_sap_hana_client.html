<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Role upgrade_sap_hana_client &mdash; IBM ansible-power-aix-sap collection 1.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Role upgrade_sap_kernel" href="upgrade_sap_kernel.html" />
    <link rel="prev" title="Role upgrade_ibm_db2_client" href="upgrade_ibm_db2_client.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> IBM ansible-power-aix-sap collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install_and_config.html">Installation and configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Available roles</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install_saphostagent.html">Role install_saphostagent</a></li>
<li class="toctree-l1"><a class="reference internal" href="sap_install_app_server.html">Role sap_install_app_server</a></li>
<li class="toctree-l1"><a class="reference internal" href="sap_opsyscheck.html">Role sap_opsyscheck</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_dir.html">Role save_dir</a></li>
<li class="toctree-l1"><a class="reference internal" href="start_db.html">Role start_db</a></li>
<li class="toctree-l1"><a class="reference internal" href="start_sap.html">Role start_sap</a></li>
<li class="toctree-l1"><a class="reference internal" href="stop_db.html">Role stop_db</a></li>
<li class="toctree-l1"><a class="reference internal" href="stop_sap.html">Role stop_sap</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_ibm_db2_client.html">Role upgrade_ibm_db2_client</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Role upgrade_sap_hana_client</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#remarks">Remarks:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#defaults">Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-playbook">Example Playbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="#author-information">Author Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_sap_kernel.html">Role upgrade_sap_kernel</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Role Based Access Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AIX_RBAC_for_Ansible.html">Using AIX RBAC with Ansible</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IBM ansible-power-aix-sap collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Role upgrade_sap_hana_client</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/IBM/ansible-power-aix-sap/blob/main/docs/docsite/upgrade_sap_hana_client.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="role-upgrade-sap-hana-client">
<span id="ibm-ansible-power-aix-sap-docsite-upgrade-sap-hana-client"></span><h1><a class="toc-backref" href="#id9">Role upgrade_sap_hana_client</a><a class="headerlink" href="#role-upgrade-sap-hana-client" title="Permalink to this headline"></a></h1>
<p>The SAP HANA client is needed to access a remote SAP HANA database from an SAP Application Server ABAP running on AIX. It can be downloaded from the Software Distribution Center in the SAP Support Portal (<a class="reference external" href="https://support.sap.com/swdc">SWDC</a>) as an SAP Archive (SAR) file. For preventive maintenance, it is advised to upgrade the SAP HANA client from time to time with the latest version. The role upgrade_sap_hana_client is used to upgrade an existing SAP HANA client from a downloaded SAR file. The role is not intended to install the SAP HANA client on a system where it has not been installed previously. Both SAP HANA client versions are supported, version 1 and version 2.</p>
<p>To extract the downloaded SAR file, you must provide the SAP utility SAPCAR and provide it’s location in variable <code class="docutils literal notranslate"><span class="pre">upglocation_of_SAPCAR_utility_managednode</span></code>. By default, SAPCAR is being searched in directory <code class="docutils literal notranslate"><span class="pre">/usr/sap/ansible/downloads</span></code>.</p>
<p>Before the already installed SAP HANA client is updated, the currently installed version is backed up into a compressed file that follows the naming pattern <code class="docutils literal notranslate"><span class="pre">__save_HDB_Client.&lt;Timestamp-Year-Month-Day-Hour-Minute-Second&gt;.tar.Z</span></code>. By default, the backup file is saved in directory <code class="docutils literal notranslate"><span class="pre">/usr/sap/ansible/hdb_client_backup</span></code>. Older backups in this directory are not cleaned up automatically, so you may want to check and clean up the directory manually from time to time.</p>
<p>When you upgrade an SAP HANA client, the downloaded SAR file is extracted into a temporary directory, by default <code class="docutils literal notranslate"><span class="pre">/usr/sap/ansible/working_dir/hdb_client</span></code>. After a successful installation of the SAP HANA client, this directory will be deleted. After some consistency checks, the upgrade of the SAP HANA client will be performed by executing the program <code class="docutils literal notranslate"><span class="pre">hdbinst</span></code> with the parameter <code class="docutils literal notranslate"><span class="pre">--path</span></code> and the path name specified in variable <code class="docutils literal notranslate"><span class="pre">upgdir_of_HANA_client_managednode</span></code>. The default target path name is <code class="docutils literal notranslate"><span class="pre">/usr/sap/hdbclient</span></code>.</p>
<p>The upgrade operation will fail if an SAP instance is active that is using the currently installed SAP HANA client. In this case, you need to stop the active SAP application server instances and repeat the upgrade.</p>
<p>You can find more information about the SAP HANA Client Installation and Update in the SAP blog: (<a class="reference external" href="https://blogs.sap.com/2017/12/14/sap-hana-2.0-client-installation-and-update-by-the-sap-hana-academy">SAP HANA Client Installation and Update</a>)</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#role-upgrade-sap-hana-client" id="id9">Role upgrade_sap_hana_client</a></p>
<ul>
<li><p><a class="reference internal" href="#requirements" id="id10">Requirements</a></p></li>
<li><p><a class="reference internal" href="#tags" id="id11">Tags</a></p></li>
<li><p><a class="reference internal" href="#variables" id="id12">Variables</a></p></li>
<li><p><a class="reference internal" href="#defaults" id="id13">Defaults</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id14">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#example-playbook" id="id15">Example Playbook</a></p></li>
<li><p><a class="reference internal" href="#license" id="id16">License</a></p></li>
<li><p><a class="reference internal" href="#author-information" id="id17">Author Information</a></p></li>
<li><p><a class="reference internal" href="#copyright" id="id18">Copyright</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="requirements">
<h2><a class="toc-backref" href="#id10">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h2>
<p>This role is intended for the operating system IBM AIX. The target system must be enabled to execute Ansible playbooks. For details, see the prerequisites section in <a class="reference internal" href="install_and_config.html#ibm-ansible-power-aix-sap-docsite-install-and-config-prerequisites"><span class="std std-ref">Ansible Content for IBM Power Systems - AIX with SAP Software</span></a>.</p>
<p>Make sure that the file system that holds the directory <code class="docutils literal notranslate"><span class="pre">/usr/sap</span></code> has enough free diskspace for creating and holding the backup files as well as the temporary file. By default, these files will be created in directory <code class="docutils literal notranslate"><span class="pre">/usr/sap/ansible</span></code>.</p>
</section>
<section id="tags">
<h2><a class="toc-backref" href="#id11">Tags</a><a class="headerlink" href="#tags" title="Permalink to this headline"></a></h2>
<p>The following tag can be specified optionally. Omitting the tag or specifying tag <code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">all</span></code> has the same effect.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tag</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgrade_sap_hana_client</span></code></p></td>
<td><p>The HANA Client will be updated by the version stored in <code class="docutils literal notranslate"><span class="pre">upgfile_name_of_HANA_client_SAR_file</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="variables">
<h2><a class="toc-backref" href="#id12">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 64%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgbackup_for_dir_hana_client_managednode</span></code></p></td>
<td><p>Backup directory to backup the HANA client directory</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id1">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upgowner_of_client_dir</span></code></p></td>
<td><p>Owner of the SAP HANA Client directory</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgtemp_working_dir_managednode</span></code></p></td>
<td><p>Temporary directory, that will be created on the target host for extracting the HANA Client SAR file</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id2">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upglocation_of_HANA_Client_SAR_managednode</span></code></p></td>
<td><p>Directory on the target node where the SAR file of the HANA Client is provided</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id3">1</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upglocation_of_SAPCAR</span> <span class="pre">utility_managednode</span></code></p></td>
<td><p>Directory on the target host where SAPCAR utility is provided</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id4">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upgsapcar_file_name</span></code></p></td>
<td><p>SAPCAR utility file name</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id5">1</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgdir_of_HANA_client_managednode</span></code></p></td>
<td><p>Directory on the target host where the HANA client resides and should be upgraded</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id6">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upgfile_name_of_HANA_client_SAR_file</span></code></p></td>
<td><p>Name of the SAP HANA Client SAR file</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id8" id="id7">1</a></p></td>
</tr>
</tbody>
</table>
<section id="remarks">
<h3>Remarks:<a class="headerlink" href="#remarks" title="Permalink to this headline"></a></h3>
<dl class="footnote brackets">
<dt class="label" id="id8"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>,<a href="#id3">3</a>,<a href="#id4">4</a>,<a href="#id5">5</a>,<a href="#id6">6</a>,<a href="#id7">7</a>)</span></dt>
<dd><p>Default provided.</p>
</dd>
</dl>
</section>
</section>
<section id="defaults">
<h2><a class="toc-backref" href="#id13">Defaults</a><a class="headerlink" href="#defaults" title="Permalink to this headline"></a></h2>
<p>Suggested default values are provided in defaults/main.yml:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgbackup_for_dir_hana_client_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/ansible/hdb_client_backup&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upgtemp_working_dir_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/ansible/working_dir/hdb_client&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upglocation_of_HANA_Client_SAR_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/ansible/downloads&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upglocation_of_SAPCAR_utility_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/ansible/downloads&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgsapcar_file_name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;SAPCAR&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">upgfile_name_of_HANA_client_SAR_file</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;HANA_CLIENT.SAR&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">upgdir_of_HANA_client_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/hdbclient&quot;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id14">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline"></a></h2>
<p>None.</p>
</section>
<section id="example-playbook">
<h2><a class="toc-backref" href="#id15">Example Playbook</a><a class="headerlink" href="#example-playbook" title="Permalink to this headline"></a></h2>
<p>The example playbook is used to upgrade the SAP HANA client software for an SAP system named HDA on several hosts. It is based on the assumption that a configuration file and an inventory file with contents similar to the <a class="reference internal" href="install_and_config.html#ibm-ansible-power-aix-sap-docsite-install-and-config-configuration"><span class="std std-ref">configuration documentation</span></a> exist in the current directory. The necessary SAP archive file IMDB_CLIENT20_013_13-80002090.SAR and the SAPCAR tool must have been downloaded from the SAP Software Distribution Center and stored in directory /usr/sap/ansible/HDA/hdbclient_work. The playbook is located in the current directory, named upg_hdb_client.yaml and has the following contents:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upgrade SAP HANA Client</span><span class="w"></span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibmaix_servers</span><span class="w"></span>
<span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upgowner_of_client_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hdaadm&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upgfile_name_of_HANA_client_SAR_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;IMDB_CLIENT20_013_13-80002090.SAR&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upgsapcar_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SAPCAR&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upgdir_of_HANA_client_managednode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/sap/HDA/hdbclient&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upglocation_of_HANA_Client_SAR_managednode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/sap/ansible/HDA/hdbclient_work&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upglocation_of_SAPCAR_utility_managednode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/sap/ansible/HDA/hdbclient_work&quot;</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">upgbackup_for_dir_hana_client_managednode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/sap/ansible/HDA/baackup_dir&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">roles</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;ansible_dir&gt;/roles/upgrade_sap_hana_client</span><span class="w"></span>
</pre></div>
</div>
<p>To execute this playbook, enter the command:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ansible-playbook --verbose -t upgrade_sap_hana_client upg_hdb_client.yaml</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="license">
<h2><a class="toc-backref" href="#id16">License</a><a class="headerlink" href="#license" title="Permalink to this headline"></a></h2>
<p>This collection is licensed under the <a class="reference external" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>.</p>
</section>
<section id="author-information">
<h2><a class="toc-backref" href="#id17">Author Information</a><a class="headerlink" href="#author-information" title="Permalink to this headline"></a></h2>
<p>SAP on IBM Power Development Team</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#id18">Copyright</a><a class="headerlink" href="#copyright" title="Permalink to this headline"></a></h2>
<p>Copyright IBM Corporation 2021,2022</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="upgrade_ibm_db2_client.html" class="btn btn-neutral float-left" title="Role upgrade_ibm_db2_client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="upgrade_sap_kernel.html" class="btn btn-neutral float-right" title="Role upgrade_sap_kernel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021,2022, IBM.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>